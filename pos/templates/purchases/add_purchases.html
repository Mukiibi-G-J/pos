{% extends 'base/base.html' %} {% block content %} {% load widget_tweaks %}
<div class="wrapper">
  <div class="content-page">
    <div class="container-fluid add-form-list">
      {% if products %}
     
      <div
      id="product_popup_purchase"
      class="modal fade bd-example-modal-xl show"
      tabindex="-1"
      role="dialog"
      aria-modal="true"
      style="padding-right: 4px; display: block"
    >
      <div class="modal-dialog modal-xl  modal-dialog-scrollable" role="document" id="exampleModalCenter">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Edit Uploaded data</h5>
            <button
            id="close_product_popup"
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true" id="close_my_popup">Ã—</span>
            </button>
          </div>
          <div class="modal-body">
           <div class="card">
            <form action="{% url 'products:add_product_upload' %}" method="post">
             {% csrf_token %}
             <div class="card-header">
               <button type="submit" class="btn btn-primary">Submit</button>
 
             </div>
             <div class="card-body">
                <table class="table">
                   <thead>
                      <tr>
                        <th scope="col">UUID</th>
                         <th scope="col">Product Name</th>
                         <th scope="col">Description</th>
                         <th scope="col">Quantity</th>
                         <th scope="col">Purchase Price</th>
                         <th scope="col">Sales Price</th>
                         <th scope="col">Purchase Quantity</th>
                         <th scope="col">Purchase Date</th>
                         <th scope="col">Supplier</th>
                      </tr>
                   </thead>
                   <tbody>

                   {% for product in products.new_product %}

                  
                  {% if forloop.counter0|divisibleby:2 %}
                  <tr>
                {% endif %}
                <tr class="table-default">
                  <td colspan="9"><strong>New Products</strong></td>  {{ forloop.counter }} 
              </tr>
                {% if forloop.counter|divisibleby:2 or forloop.last %}
                  </tr>
                {% endif %}
                
                     <tr class="table-default">
                       <th scope="row">
                         <input
                           type="text"
                           class="form-control"
                           name="uuid"
                           value="{{ product.product_code }}"
                           readonly
                         />
                       <th scope="row">
                         <input
                           type="text"
                           class="form-control"
                           name="product_name"
                           value="{{ product.product_name }}"
                         />
                       </th>
                       <td>
                         <input
                           type="text"
                           class="form-control"
                           name="description"
                           value="{{ product.description }}"
                         />
                       </td>
                       <td>
                         <input
                           type="text"
                           class="form-control"
                           name="quantity"
                           value="{{ product.quantity }}"
                         />
 
                       </td>
                       <td>
                         <input
                           type="text"
                           class="form-control"
                           name="purchase_price"
                           value="{{ product.cost_price }}"
                         />
 
                       </td>
                       <td>
                         <input
                           type="text"
                           class="form-control"
                           name="sales_price"
                           value="{{ product.sales_price }}"
                         />
 
                       </td>
                       <td>
                         <input
                           type="text"
                           class="form-control"
                           name="category"
                           value="{{ product.purchase_quantity }}"
                         />
 
                       </td>
                       <td>
                         <input
                           type="text"
                           class="form-control"
                           name="unit"
                           value="{{ product.purchase_date }}"
                         />
 
                       </td>
                       <td>
                         <input
                           type="text"
                           class="form-control"
                           name="brand"
                           value="{{ product.supplier }}"
                         />
 
                       </td>
                     </tr>
                       {% endfor %}
                      {% for product in products.old_product %}
                      {% if forloop.counter0|divisibleby:2 %}
                            <tr>
                          {% endif %}
                          <tr class="table-default">
                            <td colspan="9"><strong>OLD Products</strong></td>  {{ forloop.counter }} 
                        </tr>
                          {% if forloop.counter|divisibleby:2 or forloop.last %}
                            </tr>
                          {% endif %}
                      <tr class="table-default">
                      <th scope="row">
                        <input
                          type="text"
                          class="form-control"
                          name="uuid"
                          value="{{ product.product_code }}"
                          readonly
                        />
                      <th scope="row">
                        <input
                          type="text"
                          class="form-control"
                          name="product_name"
                          value="{{ product.product_name }}"
                        />
                      </th>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          name="description"
                          value="{{ product.description }}"
                        />
                      </td>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          name="quantity"
                          value="{{ product.quantity }}"
                        />

                      </td>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          name="purchase_price"
                          value="{{ product.cost_price }}"
                        />

                      </td>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          name="sales_price"
                          value="{{ product.sales_price }}"
                        />

                      </td>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          name="category"
                          value="{{ product.purchase_quantity }}"
                        />

                      </td>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          name="unit"
                          value="{{ product.purchase_date }}"
                        />

                      </td>
                      <td>
                        <input
                          type="text"
                          class="form-control"
                          name="brand"
                          value="{{ product.supplier }}"
                        />

                      </td>
                    </tr>
                     
                   {% endfor %}
                   </tbody>
                </table>
              
             </div>
             </form>
          </div>
          </div>
         
        </div>
      </div>
    </div>
       {% endif %}
      <div class="header-title">
        <h4 class="card-title">Upload Execl File</h4>
      </div>
      <div class="input-group mb-4 mr-3 ">
        <form
          class="d-flex"
          method="POST"
          enctype="multipart/form-data"
          action="{% url 'products:upload_purchase' %}"
        >
          {% csrf_token %}
          <div class="custom-file">
            {% render_field form.file class="custom-file-input" id="inputGroupFile04" required="required" %}

            

            <label class="custom-file-label" for="inputGroupFile04">Choose file</label>
          </div>
          <div class="input-group-append">
            <button class="btn btn-outline-secondary ml-4" type="submit" href="{% url 'products:upload_purchase' %}">
              Submit
            </button>
          </div>
        </form>
      </div>
      <div class="row">
        <div class="col-sm-12">
          <div class="card">
            <div class="card-header d-flex justify-content-between">
              <div class="header-title">
                <h4 class="card-title">Add Purchase</h4>
              </div>
            </div>
            <div class="card-body">
              <form action="page-list-purchase.html" data-toggle="validator">
                <div class="row">
                  <div class="col-md-12">
                    <div class="form-group">
                      <label for="dob">Date *</label>
                      <input
                        type="date"
                        class="form-control"
                        id="dob"
                        name="dob"
                      />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Purchase No *</label>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Purchase No"
                        required
                      />
                      <div class="help-block with-errors"></div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Supplier</label>
                      <select
                        name="type"
                        class="selectpicker form-control"
                        data-style="py-0"
                      >
                        <option>Select Supplier</option>
                        <option>Test Supplier</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Received</label>
                      <select
                        name="type"
                        class="selectpicker form-control"
                        data-style="py-0"
                      >
                        <option>Received</option>
                        <option>Not received yet</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Order Tax</label>
                      <select
                        name="type"
                        class="selectpicker form-control"
                        data-style="py-0"
                      >
                        <option>No Text</option>
                        <option>GST @5%</option>
                        <option>VAT @20%</option>
                      </select>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Discount</label>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Discount"
                      />
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Shipping</label>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Shipping"
                      />
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <label>Payment *</label>
                      <input
                        type="text"
                        class="form-control"
                        placeholder="Payment"
                        required
                      />
                      <div class="help-block with-errors"></div>
                    </div>
                  </div>
                  <div class="col-md-12">
                    <div class="form-group">
                      <label>Note *</label>
                      <div id="quill-tool">
                        <button
                          class="ql-bold"
                          data-toggle="tooltip"
                          data-placement="bottom"
                          title="Bold"
                        ></button>
                        <button
                          class="ql-underline"
                          data-toggle="tooltip"
                          data-placement="bottom"
                          title="Underline"
                        ></button>
                        <button
                          class="ql-italic"
                          data-toggle="tooltip"
                          data-placement="bottom"
                          title="Add italic text <cmd+i>"
                        ></button>
                        <button
                          class="ql-image"
                          data-toggle="tooltip"
                          data-placement="bottom"
                          title="Upload image"
                        ></button>
                        <button
                          class="ql-code-block"
                          data-toggle="tooltip"
                          data-placement="bottom"
                          title="Show code"
                        ></button>
                      </div>
                      <div id="quill-toolbar"></div>
                    </div>
                  </div>
                </div>
                <button type="submit" class="btn btn-primary mr-2">
                  Add Purchase
                </button>
                <button type="reset" class="btn btn-danger">Reset</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
